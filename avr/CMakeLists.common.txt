
# Detect build path
SET (APP_ROOT ${CMAKE_CURRENT_SOURCE_DIR})
MESSAGE (STATUS "App root: ${APP_ROOT}")

# Detect system root
GET_FILENAME_COMPONENT (BUILD_SYSTEM_ROOT "${APP_ROOT}/../../" ABSOLUTE)

# Detect our work path and project name
GET_FILENAME_COMPONENT (APP_NAME ${APP_ROOT} NAME)

INCLUDE("../avr.cmake")

PROJECT(${APP_NAME})
CMAKE_MINIMUM_REQUIRED(VERSION 2.6)

INCLUDE_DIRECTORIES("src")
INCLUDE_DIRECTORIES("../common")
INCLUDE_DIRECTORIES("${AVR_TOOLCHAIN_INCLUDE_DIR}")

MESSAGE(STATUS "${AVR_PROJECTS_ROOT}")

FILE(GLOB_RECURSE SRCS "src/*.c")
FILE(GLOB_RECURSE COMMON_SRCS "../common/*.c")

ADD_EXECUTABLE(${CMAKE_PROJECT_NAME} ${SRCS} ${COMMON_SRCS})
